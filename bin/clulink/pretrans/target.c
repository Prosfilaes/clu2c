/* Generated by clu2c (version 1.99.3) */
/* option, optimize time */
/* depend,target,_external_system,date,file_date,file_exists,file_name,logger*/

#include <clu2c.h>

static STRING_REP(10) str1 = {10, {'u', 'p', '_', 't', 'o', '_', 'd', 'a', 't', 'e'}};
static STRING_REP(9) str2 = {9, {'c', 'r', 'e', 'a', 't', 'i', 'n', 'g', ' '}};
static STRING_REP(16) str3 = {16, {'c', 'o', 'u', 'l', 'd', 'n', '\'', 't', ' ', 'c', 'r', 'e', 'a', 't', 'e', ' '}};
static STRING_REP(19) str4 = {19, {'c', 'o', 'm', 'p', 'i', 'l', 'a', 't', 'i', 'o', 'n', ' ', 'f', 'a', 'i', 'l', 'u', 'r', 'e'}};
static STRING_REP(13) str5 = {13, {':', ' ', 'n', 'o', 'n', 'e', 'x', 'i', 's', 't', 'e', 'n', 't'}};

/* begin module */
/* c_function_name, OFtarget_Dcreate */
/* clu_operation_name, target$create */
int OFtarget_Dcreate(LVname)
     object LVname;
{
  object LVprereq= 0;
  object LVt= 0;
  int t1;
  /* begin body */
  OFarray_Dnew();
  LVprereq = retval_area[0];
  t1 = OFrecord_D__alloc(3);
  OMrecord_Dset(1, t1, SLNULL);
  OMrecord_Dset(2, t1, LVname);
  OMrecord_Dset(3, t1, LVprereq);
  LVt = t1;
  retval_area[0] = LVt;
  return RET;
  /* end body */
except0:
  out_handler(SLNULL);
  return(SIG);
}
/* c_function_name, OFtarget_Dget__name */
/* clu_operation_name, target$get_name */
int OFtarget_Dget__name(LVt)
     object LVt;
{
  /* begin body */
  retval_area[0] = OMrecord_Dget(2, LVt);
  return RET;
  /* end body */
except0:
  out_handler(SLNULL);
  return(SIG);
}
/* c_function_name, OFtarget_Dadd__prereq */
/* clu_operation_name, target$add_prereq */
int OFtarget_Dadd__prereq(LVt, LVprereq)
     object LVt;
     object LVprereq;
{
  /* begin body */
  OMarray_Daddh(OMrecord_Dget(3, LVt), LVprereq);
  /* end body */
  return(RET);
except0:
  out_handler(SLNULL);
  return(SIG);
}
/* c_function_name, OFtarget_Dset__action */
/* clu_operation_name, target$set_action */
int OFtarget_Dset__action(LVt, LVaction)
     object LVt;
     object LVaction;
{
  /* begin body */
  OMrecord_Dset(1, LVt, LVaction);
  /* end body */
  return(RET);
except0:
  out_handler(SLNULL);
  return(SIG);
}
/* c_function_name, OFtarget_Dmake */
/* clu_operation_name, target$make */
int OFtarget_Dmake(LVt, LVlog, LVforced)
     object LVt;
     object LVlog;
     object LVforced;
{
  object LVup__to__date= 0;
  object LVname= 0;
  int t1, t2, t3, t4;
  /* begin body */
  LVup__to__date = FALSE;
  if (AFfile__exists(OMrecord_Dget(2, LVt)) == SIG)
    {
      goto except0;
    }
  if (retval_area[0])
    {
      LVup__to__date = TRUE;
    }
    {
      object LVprereq= 0;
      for (t1 = OMrecord_Dget(3, LVt), t2 = OMarray_Dlow(t1), t3 = OMarray_Dhigh(t1);
           t2 <= t3;
           t2++)
        {
	  LVprereq = OMarray_Dfetch(t1, t2);
	    {
	      if (OFtarget_Dmake(LVprereq, LVlog, LVforced) == SIG)
	        {
		  goto except1;
	        }
	      if (FALSE)
	        {
		except1:
		  if (OMstring_Dequal(signame, ((string) &str1)))
		    {
		    }
		  else if (OMstring_Dequal(signame, SLNOT_POSSIBLE))
		    {
		      object LVwhy= 0;
		      LVwhy = sigarg_area[0];
		        {
			  sigarg_area[0] = LVwhy;
			  signame = SLNOT_POSSIBLE;
			  return(SIG);
		        }
		    }
		  else
		    {
		      goto except0;
		    }
	        }
	      t4 = OMrecord_Dget(2, LVt);
	      if (OFtarget_Dget__name(LVprereq) == SIG)
	        {
		  goto except0;
	        }
	      if (OFtarget_Dfile__is__newer__than__file(t4, retval_area[0]) == SIG)
	        {
		  goto except0;
	        }
	      if (OMbool_Dnot(retval_area[0]))
	        {
		  LVup__to__date = FALSE;
	        }
	    }
        }
    }
  if (OFfile__name_Dunparse(OMrecord_Dget(2, LVt)) == SIG)
    {
      goto except0;
    }
  LVname = retval_area[0];
  t1 = FALSE;
  if (LVup__to__date)
    {
      if (OMbool_Dnot(LVforced))
        {
	  t1 = TRUE;
        }
    }
  if (t1)
    {
      signame = ((string) &str1);
      return(SIG);
    }
  else
    {
      if (OMbool_Dnot(OMstring_Dempty(OMrecord_Dget(1, LVt))))
        {
	  object LVaction= 0;
	  t2 = OMstring_Dsize(((string) &str2))
	       + OMstring_Dsize(LVname);
	  t3 = OFstring_D__predict(t2);
	  OFstring_D__concat(t3, ((string) &str2));
	  OFstring_D__concat(t3, LVname);
	  if (OFlogger_Dmessage(LVlog, 1, t3) == SIG)
	    {
	      goto except0;
	    }
	  if (OFtarget_Dexpand__action(LVt) == SIG)
	    {
	      goto except0;
	    }
	  LVaction = retval_area[0];
	  if (OFlogger_Dmessage(LVlog, 2, LVaction) == SIG)
	    {
	      goto except0;
	    }
	  if (AF__external__system(LVaction) == SIG)
	    {
	      goto except0;
	    }
	  if (AFfile__exists(OMrecord_Dget(2, LVt)) == SIG)
	    {
	      goto except0;
	    }
	  if (OMbool_Dnot(retval_area[0]))
	    {
	      t2 = OMstring_Dsize(((string) &str3))
	           + OMstring_Dsize(LVname);
	      t3 = OFstring_D__predict(t2);
	      OFstring_D__concat(t3, ((string) &str3));
	      OFstring_D__concat(t3, LVname);
	      if (OFlogger_Dmessage(LVlog, 0, t3) == SIG)
	        {
		  goto except0;
	        }
	      sigarg_area[0] = ((string) &str4);
	      signame = SLNOT_POSSIBLE;
	      return(SIG);
	    }
        }
      else
        {
	  if (AFfile__exists(OMrecord_Dget(2, LVt)) == SIG)
	    {
	      goto except0;
	    }
	  if (OMbool_Dnot(retval_area[0]))
	    {
	      t2 = OMstring_Dsize(LVname)
	           + OMstring_Dsize(((string) &str5));
	      t3 = OFstring_D__predict(t2);
	      OFstring_D__concat(t3, LVname);
	      OFstring_D__concat(t3, ((string) &str5));
	      sigarg_area[0] = t3;
	      signame = SLNOT_POSSIBLE;
	      return(SIG);
	    }
        }
    }
  /* end body */
  return(RET);
except0:
  out_handler(SLNULL);
  return(SIG);
}
/* c_function_name, OFtarget_Dfile__is__newer__than__file */
/* clu_operation_name, target$file_is_newer_than_file */
int OFtarget_Dfile__is__newer__than__file(LVfn1, LVfn2)
     object LVfn1;
     object LVfn2;
{
  object LVdate1= 0;
  object LVdate2= 0;
  /* begin body */
    {
      if (AFfile__date(LVfn1, FALSE) == SIG)
        {
	  goto except1;
        }
      LVdate1 = retval_area[0];
      if (AFfile__date(LVfn2, FALSE) == SIG)
        {
	  goto except1;
        }
      LVdate2 = retval_area[0];
    }
  if (FALSE)
    {
    except1:
      if (OMstring_Dequal(signame, SLNOT_POSSIBLE))
        {
	  retval_area[0] = FALSE;
	  return RET;
        }
      else
        {
	  goto except0;
        }
    }
  if (OFdate_Dgt(LVdate1, LVdate2) == SIG)
    {
      goto except0;
    }
  retval_area[0] = retval_area[0];
  return RET;
  /* end body */
except0:
  out_handler(SLNULL);
  return(SIG);
}
/* c_function_name, OFtarget_Dexpand__action */
/* clu_operation_name, target$expand_action */
int OFtarget_Dexpand__action(LVt)
     object LVt;
{
  object LVformat= 0;
  object LVresult= 0;
  int t1, t2, t3, t4, t5;
  /* begin body */
  LVformat = OMrecord_Dget(1, LVt);
  LVresult = SLNULL;
  while (TRUE)
    {
      if (!OMbool_Dnot(OMstring_Dempty(LVformat)))
        {
	  break;
        }
        {
	  object LVi= 0;
	  object LVc= 0;
	  OFstring_Dindexc('$', LVformat);
	  LVi = retval_area[0];
	  if (OMint_Dequal(LVi, 0))
	    {
	      t1 = OMstring_Dsize(LVresult)
	           + OMstring_Dsize(LVformat);
	      t2 = OFstring_D__predict(t1);
	      OFstring_D__concat(t2, LVresult);
	      OFstring_D__concat(t2, LVformat);
	      LVresult = t2;
	      break;
	    }
	  if (OFstring_Dsubstr(LVformat, 1, OMint_Dsub(LVi, 1)) == SIG)
	    {
	      goto except0;
	    }
	  t1 = OMstring_Dsize(LVresult)
	       + OMstring_Dsize(retval_area[0]);
	  t2 = OFstring_D__predict(t1);
	  OFstring_D__concat(t2, LVresult);
	  OFstring_D__concat(t2, retval_area[0]);
	  LVresult = t2;
	  if (OFstring_Drest(LVformat, OMint_Dadd(LVi, 1)) == SIG)
	    {
	      goto except0;
	    }
	  LVformat = retval_area[0];
	  if (OMstring_Dbounds(LVformat, 1))
	    {
	      signame = SLBOUNDS;
	      goto except1;
	    }
	  LVc = OMstring_Dfetch(LVformat, 1);
	  if (FALSE)
	    {
	    except1:
	      if (OMstring_Dequal(signame, SLBOUNDS))
	        {
		  OFstring_Dappend(LVresult, '$');
		  LVresult = retval_area[0];
		  break;
	        }
	      else
	        {
		  goto except0;
	        }
	    }
	  if (OMchar_Dequal(LVc, '@'))
	    {
	      if (OFfile__name_Dunparse(OMrecord_Dget(2, LVt)) == SIG)
	        {
		  goto except0;
	        }
	      t1 = OMstring_Dsize(LVresult)
	           + OMstring_Dsize(retval_area[0]);
	      t2 = OFstring_D__predict(t1);
	      OFstring_D__concat(t2, LVresult);
	      OFstring_D__concat(t2, retval_area[0]);
	      LVresult = t2;
	      if (OFstring_Drest(LVformat, 2) == SIG)
	        {
		  goto except0;
	        }
	      LVformat = retval_area[0];
	    }
	  else
	    {
	      if (OMchar_Dequal(LVc, '<'))
	        {
		  object LVfirst= 0;
		  LVfirst = TRUE;
		    {
		      object LVprereq= 0;
		      for (t1 = OMrecord_Dget(3, LVt), t2 = OMarray_Dlow(t1), t3 = OMarray_Dhigh(t1);
		           t2 <= t3;
		           t2++)
		        {
			  LVprereq = OMarray_Dfetch(t1, t2);
			    {
			      if (LVfirst)
			        {
				  LVfirst = FALSE;
			        }
			      else
			        {
				  OFstring_Dappend(LVresult, ' ');
				  LVresult = retval_area[0];
			        }
			      if (OFtarget_Dget__name(LVprereq) == SIG)
			        {
				  goto except0;
			        }
			      if (OFfile__name_Dunparse(retval_area[0]) == SIG)
			        {
				  goto except0;
			        }
			      t4 = OMstring_Dsize(LVresult)
			           + OMstring_Dsize(retval_area[0]);
			      t5 = OFstring_D__predict(t4);
			      OFstring_D__concat(t5, LVresult);
			      OFstring_D__concat(t5, retval_area[0]);
			      LVresult = t5;
			    }
		        }
		    }
		  if (OFstring_Drest(LVformat, 2) == SIG)
		    {
		      goto except0;
		    }
		  LVformat = retval_area[0];
	        }
	      else
	        {
		  OFstring_Dappend(LVresult, '$');
		  LVresult = retval_area[0];
	        }
	    }
        }
    }
  retval_area[0] = LVresult;
  return RET;
  /* end body */
except0:
  out_handler(SLNULL);
  return(SIG);
}
/* end module */
